<wrapper :max-width=1440>
  <grid-container>
    <grid-item columns="lg-5 sm-12">
    <%= form_tag(my_requests_path, method: :get) do %>
      <search-box>
        <input-text id="query" name="query" value="<%=params[:query]%>" :hide-label=true label="search" placeholder="Search..."></input-text>
        <input-button type="submit" id="search" variation="icon" icon="search" aria-label="submit search"></input-button>
      </search-box>
    <% end %>
    </grid-item>

    <grid-item columns="lg-7 sm-12 auto" :offset=true>
    <dropdown-menu type="links" id="status-menu" button-label="<%= @requests.current_status_filter_label %>" :menu-items="[
      <% @requests.status_filter_urls.each do |key, url| %>
        {name: '<%= key %>', component: '<%= key %>', href: '<%= url %>'},
      <% end %>
    ]"></dropdown-menu>

    <dropdown-menu type="links" id="request-type-menu" button-label="<%= @requests.current_request_type_filter_label %>" :menu-items="[
      {name: 'Absence', component: 'Absence', href: '<%= @requests.absence_filter_url %>'},
      <% @requests.absence_filter_urls.each do |key, url| %>
        {name: '<%= key %>', component: '<%= key %>', parent: 'Absence', href: '<%= url %>'},
      <% end %>
      {name: 'Travel', component: 'Travel', href: '<%= @requests.travel_filter_url %>'},
      <% @requests.travel_filter_urls.each do |key, url| %>
        {name: '<%= key %>', component: '<%= key %>', parent: 'Travel', href: '<%= url %>'},
      <% end %>
    ]"></dropdown-menu>

    <dropdown-menu type="links" id="sort-menu" button-label="<%= @requests.current_sort_label %>" :menu-items="[
      <% @requests.sort_urls.each do |key, url| %>
        {name: '<%= key %>', component: '<%= key %>', href: '<%= url %>'},
      <% end %>
    ]"></dropdown-menu>
    </grid-item>
  </grid-container>
</wrapper>

<wrapper :max-width=1440>
  <tag type="filter" :tag-items="[
    <% @requests.filter_removal_urls.each do |key, url| %>
    {name: '<%= key %>', href: '<%= url %>'},
    <% end %>
  ]"></tag>
</wrapper>

<wrapper :max-width=1440 class="my-request">
<grid-container>
    <grid-item columns="lg-12 sm-12">
      <% @requests.each do |request| %>
        <%= if request.request_type == 'TravelRequest'
              render 'travel_requests/index_detail', travel_request: request
            else
              render 'absence_requests/index_detail', absence_request: request
            end %>
      <% end %>
    </grid-item>
  </grid-container>
</wrapper>
