<wrapper :max-width=1440>
  <grid-container>
    <grid-item columns="lg-12 sm-12">
      <card size="full-width" class="search-filter-sort">
        <card-content>
          <grid-container>
            <%= render :search_request, search_path: search_path, current_query: params[:query]%>

            <grid-item columns="sm-12 auto">
              <%= render 'status_filter', status_filter_urls: @requests.status_filter_urls, current_status_filter_label: @requests.current_status_filter_label%>

              <%= render 'request_type_filter', current_request_type_filter_label: @requests.current_request_type_filter_label, 
                                                filters: {
                                                  #'Absence' => { url: @requests.absence_filter_url, children: @requests.absence_filter_urls },
                                                  'Travel' => { url: @requests.travel_filter_url, children: @requests.travel_filter_urls }
                                                }
              %>

              <dropdown-menu type="links" id="department-menu" button-label="<%= @requests.current_department_filter_label %>" :menu-items="[
                  <% @requests.department_filter_urls.each do |key, url| %>
                    {name: '<%= key %>', component: '<%= key %>', href: '<%= url %>'},
                  <% end %>
                ]"></dropdown-menu>
            </grid-item>
            <%= render 'sort_menu', current_sort_label: @requests.current_sort_label, sort_urls: @requests.sort_urls%>
          </grid-container>

          <%= render 'filter_removal', filter_removal_urls: @requests.filter_removal_urls %>
        </card-content>
      </card>
    </grid-item>
  </grid-container>
</wrapper>
<%= render 'pagination', total_pages: @requests.total_pages, requests: @requests %>

<wrapper :max-width=1440 class="my-request">
<grid-container>
    <grid-item columns="lg-12 sm-12">
      <% if @requests.count == 0 %>
        <heading id="no-results" level="h3" size="h3">No results found for your search</heading>
      <% end %>
      <data-table caption="Report"
        :columns="[
          { 'name': 'reported', 'display_name': 'Reported', 'checkbox': true },
          { 'name': 'request_types', 'display_name': 'Request Types'},
          { 'name': 'start_date', 'display_name': 'Start Dates'},
          { 'name': 'end_date', 'display_name': 'End Dates'},
          { 'name': 'total_hours', 'display_name': 'Total Hours'},
          { 'name': 'staff', 'display_name': 'Staff'},
          { 'name': 'department', 'display_name': 'Department'}]"
        :json-data="<%= @requests.report_json %>"/>
    </grid-item>
  </grid-container>
</wrapper>
